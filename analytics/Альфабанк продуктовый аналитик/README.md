# Тестовое задание для продуктового аналитика в Альфа Банк

## Задание 1. SQL
Приведи в качестве решения скриншот с результатом, скрипт (или ссылку на запрос в среде, в которой решали задания, например http://sqlfiddle.com/), а также свои комментарии относительно предложенного решения.
Что оценивается в задании:
    1. Универсальность - запрос не должен упасть, если в БД добавить лишнюю строчку
    2. Оптимальность - лучше использовать 1 оконку, чем 5 вложенных запросов
    3. Внимательность - соответствие запроса условию задачи

### SQL1
Отобрать клиентов по г. Москва с суммарными остатками по клиенту от 20 000 на последнюю дату. 
create table #Клиенты (client_id varchar(1), FIO varchar (255) , Region varchar(50), account_num int) 
insert into #Клиенты values  
('A','Иванов','Москва',111), 
('A','Иванов','Москва',222), 
('B','Петров','Иваново',333), 
('C','Сидоров','Москва',444) 
   
create table #Cчета ([Date] date, Summa_USD money, Account_num int) 
insert into #Cчета values 
('2012-01-01',15000,111), 
('2012-02-01',10000,111), 
('2012-02-01',5000,222), 
('2012-03-01',30000,333), 
('2012-04-01',20000,444)

### SQL2
Таблица #oper хранит информацию о количестве произведенных операций на каждую календарную дату.  
Вывести на каждую дату количества операций, совершенное с начала месяца по указанную дату включительно накопительным итогом. 
  
create table #oper (date date, cnt int) 
insert into #oper values 
('2019-06-02',     1985), 
('2019-06-03',     1577), 
('2019-06-04',     1597), 
('2019-06-05',     1468), 
('2019-07-06',     82), 
('2019-07-08',     1689), 
('2019-07-09',     1556), 
('2019-07-10',     1480), 
('2019-07-11',     1405), 
('2019-07-12',     1502) 

### SQL3
Даны месячные срезы сегментов клиентов, нужно получить по каждому клиенту периоды действия каждого сегмента. 
  
create table #segment ([date] date, ClientID varchar(6),SegmentID int) 
insert into #segment values  
('2018-01-31' ,'A11111', 2), 
('2018-02-28' ,'A11111', 2), 
('2018-12-28' ,'A11111', 2), 
('2018-03-31' ,'A11111', 1), 
('2018-04-30' ,'A11111', 1), 
('2017-11-30' ,'B22222', 1), 
('2017-10-31' ,'B22222', 1), 
('2017-09-30' ,'B22222', 3), 
('2017-09-30' ,'C33333', 1), 
('2017-10-31' ,'C33333', 1) 

## Задание 2. Продуктовая аналитика
Партнерская витрина - это набор предложений партнеров банка, которые предоставляют различного рода скидки нашим клиентам.
Перед запуском витрины владелец продукта решил узнать какие данные нам нужны, чтобы мы могли адекватно оценить эффективность этого продукта.

Скриншоты ниже.
<p float="left">
  <img src="media/1.png" width="200" />
  <img src="media/2.png" width="200" />
  <img src="media/3.png" width="200" />
</p>


    1. Какой минимальный набор событий нам нужен, чтобы оценить эффективность?
    2. Какую информацию нужно передавать в событиях?
    3. На какие метрики мы будем смотреть, чтобы дать оценку этому продукту?
    4. Какие гипотезы мы можем проверить, чтобы улучшить наши основные показатели?